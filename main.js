!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-btn",inactiveButtonClass:"modal__save-btn-disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},t=(e,t,o)=>{const n=e.querySelector(`#${t.id}-error`);n.textContent="",t.classList.remove(o.inputErrorClass),n.classList.remove(o.errorClass)},o=(e,t,o)=>{(e=>e.some(e=>!e.validity.valid))(e)?n(t,o):function(e,t){e.disabled=!1,e.classList.remove(t.inactiveButtonClass)}(t,o)};function n(e,t){e.disabled=!0,e.classList.add(t.inactiveButtonClass)}const r=(e,o,n)=>{o.forEach(o=>{t(e,o,n)})},s=e=>{document.querySelectorAll(e.formSelector).forEach(n=>{((e,n)=>{const r=Array.from(e.querySelectorAll(n.inputSelector)),s=e.querySelector(n.submitButtonSelector);o(r,s,n),r.forEach(a=>{a.addEventListener("input",function(){((e,o,n)=>{o.validity.valid?t(e,o,n):((e,t,o,n)=>{const r=e.querySelector(`#${t.id}-error`);r.textContent=o,t.classList.add(n.inputErrorClass),r.classList.add(n.errorClass)})(e,o,o.validationMessage,n)})(e,a,n),o(r,s,n)})})})(n,e)})};s(e);var a=s;const c=document.querySelector(".profile__edit-button"),i=document.querySelector("#edit-profile-modal"),l=i.querySelector(".modal__close-btn"),d=document.querySelector(".profile__name"),u=document.querySelector(".profile__description"),m=i.querySelector(".modal__form"),p=i.querySelector("#profile-name-input"),_=i.querySelector("#profile-description-input");function v(t){t.classList.add("modal_is-opened"),currentModal=t,document.addEventListener("keydown",f),t===L&&n(k,e)}function y(e){e.classList.remove("modal_is-opened"),document.removeEventListener("keydown",f)}function f(e){"Escape"===e.key&&y(currentModal)}a(e),i.addEventListener("click",e=>{e.target===i&&i.classList.remove("modal_is-opened")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&i.classList.contains("modal_is-opened")&&i.classList.remove("modal_is-opened")}),c.addEventListener("click",function(){p.value=d.textContent,_.value=u.textContent,r(m,[p,_],e),v(i)}),l.addEventListener("click",function(){y(i)});const S=document.querySelector(".profile__add-button"),L=document.querySelector("#new-post-modal"),g=L.querySelector(".modal__close-btn"),k=L.querySelector(".modal__save-btn"),q=document.querySelector("#new-post-modal"),w=q.querySelector("#card-caption-input"),E=q.querySelector("#card-image-input"),h=document.querySelector(".cards__list"),b=document.querySelector("#card-template").content.querySelector(".card");function C(e){const t=b.cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image");n.src=e.link,n.alt=e.name,o.textContent=e.name;const r=t.querySelector(".card__like-button");return r.addEventListener("click",()=>{r.classList.toggle("card__like-button_active")}),t.querySelector(".card__delete-button").addEventListener("click",()=>{t.remove()}),n.addEventListener("click",()=>{B.src=e.link,B.alt=e.name,j.textContent=e.name,v(x),x.addEventListener("click",e=>{e.target===x&&y(x)})}),t}const x=document.querySelector("#preview-modal"),z=x.querySelector(".modal__close-btn_type_preview"),j=x.querySelector(".modal__caption"),B=x.querySelector(".modal__image");z.addEventListener("click",()=>{y(x)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&x.classList.contains("modal_is-opened")&&x.classList.remove("modal_is-opened")}),S.addEventListener("click",function(){r(A,[w,E],e),v(L)}),g.addEventListener("click",function(){y(L)}),L.addEventListener("click",e=>{e.target===L&&L.classList.remove("modal_is-opened")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&L.classList.contains("modal_is-opened")&&L.classList.remove("modal_is-opened")});const A=L.querySelector(".modal__form");q.addEventListener("submit",function(t){t.preventDefault();const o=C({name:w.value,link:E.value});h.prepend(o),t.target.reset(),n(k,e),y(L)}),m.addEventListener("submit",function(e){e.preventDefault(),d.textContent=p.value,u.textContent=_.value,i.classList.remove("modal_is-opened")}),[{name:"Golden Gate Bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"},{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach(e=>{const t=C(e);h.append(t)}),n(k,e)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGlCQUVKLE1BS01mLEVBQWNGLEVBTEEsQ0FDbEJTLEtBQU1kLEVBQW9CSixNQUMxQmdCLEtBQU1YLEVBQWlCTCxRQUl6Qk0sRUFBVXFCLFFBQVFoQixHQUNsQmhCLEVBQUlHLE9BQU84QixRQUNYcEUsRUFBY2dDLEVBQWtCekQsR0FDaEMwRCxFQUFXRixFQUNiLEdBU0FQLEVBQWdCVixpQkFBaUIsU0FOakMsU0FBaUNxQixHQUMvQkEsRUFBSStCLGlCQUNKNUMsRUFBY2pDLFlBQWNvQyxFQUFxQmUsTUFDakRqQixFQUFxQmxDLFlBQWNxQyxFQUE0QmMsTUFDL0RwQixFQUFpQjlCLFVBQVVDLE9BQU8sa0JBQ3BDLEdBcE5xQixDQUNuQixDQUNFbUUsS0FBTSxxQkFDTkYsS0FBTSw4SEFFUixDQUNFRSxLQUFNLGNBQ05GLEtBQU0sMkhBRVIsQ0FDRUUsS0FBTSxxQkFDTkYsS0FBTSxtSEFFUixDQUNFRSxLQUFNLGtCQUNORixLQUFNLHlIQUdSLENBQ0VFLEtBQU0sNERBQ05GLEtBQU0sMkhBRVIsQ0FDRUUsS0FBTSw0QkFDTkYsS0FBTSwwSEFFUixDQUNFRSxLQUFNLGlCQUNORixLQUFNLDRIQTJMR25ELFFBQVNnRSxJQUNwQixNQUFNbEIsRUFBY0YsRUFBZW9CLEdBQ25DdkIsRUFBVXdCLE9BQU9uQixLQUduQm5ELEVBQWNnQyxFQUFrQnpELEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ0blwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zYXZlLWJ0bi1kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcbn07XG5cbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbCwgZXJyb3JNc2csIGNvbmZpZykgPT4ge1xuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gIGVycm9yTXNnRWwudGV4dENvbnRlbnQgPSBlcnJvck1zZztcbiAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICBlcnJvck1zZ0VsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICBlcnJvck1zZ0VsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKSA9PiB7XG4gIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgIHNob3dJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gIH1cbn07XG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn07XG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpID0+IHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbCwgY29uZmlnKTtcbiAgfSBlbHNlIHtcbiAgICBlbmFibGVCdXR0b24oYnV0dG9uRWwsIGNvbmZpZyk7XG4gIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsLCBjb25maWcpIHtcbiAgYnV0dG9uRWwuZGlzYWJsZWQgPSB0cnVlO1xuICBidXR0b25FbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbn1cblxuZnVuY3Rpb24gZW5hYmxlQnV0dG9uKGJ1dHRvbkVsLCBjb25maWcpIHtcbiAgYnV0dG9uRWwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG59XG5leHBvcnQgY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbCwgaW5wdXRMaXN0LCBjb25maWcpID0+IHtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWwsIGNvbmZpZykgPT4ge1xuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWwucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWwsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbCwgY29uZmlnKTtcbiAgfSk7XG59O1xuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XG5leHBvcnQgZGVmYXVsdCBlbmFibGVWYWxpZGF0aW9uO1xuIiwiaW1wb3J0IGVuYWJsZVZhbGlkYXRpb24gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuaW1wb3J0IHtcbiAgc2V0dGluZ3MsXG4gIGRpc2FibGVCdXR0b24sXG4gIHJlc2V0VmFsaWRhdGlvbixcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJHb2xkZW4gR2F0ZSBCcmlkZ2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNy1waG90by1ieS1ncmlmZmluLXdvb2xkcmlkZ2UtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbCBUaG9yZW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzEtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJSZXN0YXVyYW50IHRlcnJhY2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMi1waG90by1ieS1jZWlsaW5lLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBbiBvdXRkb29yIGNhZmVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0IGFuZCB0aHJvdWdoIHRoZSB0cmVlc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVHVubmVsIHdpdGggbW9ybmluZyBsaWdodFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy81LXBob3RvLWJ5LXZhbi1hbmgtbmd1eWVuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy82LXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbl07XG5cbmNvbnN0IGVkaXRQcm9maWxlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtcHJvZmlsZS1tb2RhbFwiKTtcbmNvbnN0IGVkaXRQcm9maWxlQ2xvc2VCdG4gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBlZGl0UHJvZmlsZU5hbWVJbnB1dCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1uYW1lLWlucHV0XCJcbik7XG5jb25zdCBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcblxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XG5cbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICBjdXJyZW50TW9kYWwgPSBtb2RhbDtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlS2V5KTtcbiAgaWYgKG1vZGFsID09PSBuZXdQb3N0TW9kYWwpIHtcbiAgICBkaXNhYmxlQnV0dG9uKG5ld1Bvc3RTdWJtaXRCdG4sIHNldHRpbmdzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZUtleSk7XG59XG5cbmVkaXRQcm9maWxlTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICBpZiAoZXZlbnQudGFyZ2V0ID09PSBlZGl0UHJvZmlsZU1vZGFsKSB7XG4gICAgZWRpdFByb2ZpbGVNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICB9XG59KTtcblxuZnVuY3Rpb24gaGFuZGxlRXNjYXBlS2V5KGV2dCkge1xuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGNsb3NlTW9kYWwoY3VycmVudE1vZGFsKTtcbiAgfVxufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcbiAgaWYgKFxuICAgIGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIiAmJlxuICAgIGVkaXRQcm9maWxlTW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfaXMtb3BlbmVkXCIpXG4gICkge1xuICAgIGVkaXRQcm9maWxlTW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgfVxufSk7XG5cbmVkaXRQcm9maWxlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGVkaXRQcm9maWxlTmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWVFbC50ZXh0Q29udGVudDtcbiAgZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQ7XG4gIHJlc2V0VmFsaWRhdGlvbihcbiAgICBlZGl0UHJvZmlsZUZvcm0sXG4gICAgW2VkaXRQcm9maWxlTmFtZUlucHV0LCBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXRdLFxuICAgIHNldHRpbmdzXG4gICk7XG4gIG9wZW5Nb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcbn0pO1xuZWRpdFByb2ZpbGVDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjbG9zZU1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xufSk7XG5cbmNvbnN0IG5ld1Bvc3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XG5jb25zdCBuZXdQb3N0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1wb3N0LW1vZGFsXCIpO1xuY29uc3QgbmV3UG9zdENsb3NlQnRuID0gbmV3UG9zdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IG5ld1Bvc3RTdWJtaXRCdG4gPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZS1idG5cIik7XG5jb25zdCBuZXdQb3N0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25ldy1wb3N0LW1vZGFsXCIpO1xuY29uc3QgbmV3UG9zdENhcHRpb25JbnB1dCA9IG5ld1Bvc3RFbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtY2FwdGlvbi1pbnB1dFwiKTtcbmNvbnN0IG5ld1Bvc3RMaW5rSW5wdXQgPSBuZXdQb3N0RWwucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlLWlucHV0XCIpO1xuXG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpXG4gIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcblxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoZGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGNhcmRUaXRsZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgY29uc3QgY2FyZEltYWdlRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjYXJkSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcbiAgY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG5cbiAgY29uc3QgY2FyZExpa2VCdG5FbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gIGNhcmRMaWtlQnRuRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkTGlrZUJ0bkVsLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH0pO1xuXG4gIGNvbnN0IGNhcmREZWxldGVCdG5FbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcbiAgY2FyZERlbGV0ZUJ0bkVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gIH0pO1xuXG4gIGNhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcHJldmlld01vZGFsSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld01vZGFsSW1hZ2VFbC5hbHQgPSBkYXRhLm5hbWU7XG4gICAgcHJldmlld01vZGFsQ2FwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICAgIGluaXRpYWxpemVBcHAoKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuZnVuY3Rpb24gaW5pdGlhbGl6ZUFwcCgpIHtcbiAgcHJldmlld01vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBwcmV2aWV3TW9kYWwpIHtcbiAgICAgIGNsb3NlTW9kYWwocHJldmlld01vZGFsKTtcbiAgICB9XG4gIH0pO1xufVxuXG5jb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDbG9zZUJ0biA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9fY2xvc2UtYnRuX3R5cGVfcHJldmlld1wiXG4pO1xuY29uc3QgcHJldmlld01vZGFsQ2FwdGlvbkVsID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG5jb25zdCBwcmV2aWV3TW9kYWxJbWFnZUVsID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xuXG5wcmV2aWV3TW9kYWxDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKHByZXZpZXdNb2RhbCk7XG59KTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGV2ZW50KSA9PiB7XG4gIGlmIChcbiAgICBldmVudC5rZXkgPT09IFwiRXNjYXBlXCIgJiZcbiAgICBwcmV2aWV3TW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfaXMtb3BlbmVkXCIpXG4gICkge1xuICAgIHByZXZpZXdNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICB9XG59KTtcblxubmV3UG9zdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICByZXNldFZhbGlkYXRpb24obW9kYWxGb3JtLCBbbmV3UG9zdENhcHRpb25JbnB1dCwgbmV3UG9zdExpbmtJbnB1dF0sIHNldHRpbmdzKTtcbiAgb3Blbk1vZGFsKG5ld1Bvc3RNb2RhbCk7XG59KTtcbm5ld1Bvc3RDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICBjbG9zZU1vZGFsKG5ld1Bvc3RNb2RhbCk7XG59KTtcblxubmV3UG9zdE1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgaWYgKGV2ZW50LnRhcmdldCA9PT0gbmV3UG9zdE1vZGFsKSB7XG4gICAgbmV3UG9zdE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG4gIH1cbn0pO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZlbnQpID0+IHtcbiAgaWYgKFxuICAgIGV2ZW50LmtleSA9PT0gXCJFc2NhcGVcIiAmJlxuICAgIG5ld1Bvc3RNb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9pcy1vcGVuZWRcIilcbiAgKSB7XG4gICAgbmV3UG9zdE1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG4gIH1cbn0pO1xuXG5jb25zdCBtb2RhbEZvcm0gPSBuZXdQb3N0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcblxuZnVuY3Rpb24gaGFuZGxlTmV3UG9zdFN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7XG4gICAgbmFtZTogbmV3UG9zdENhcHRpb25JbnB1dC52YWx1ZSxcbiAgICBsaW5rOiBuZXdQb3N0TGlua0lucHV0LnZhbHVlLFxuICB9O1xuXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaW5wdXRWYWx1ZXMpO1xuICBjYXJkc0xpc3QucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gIGV2dC50YXJnZXQucmVzZXQoKTtcbiAgZGlzYWJsZUJ1dHRvbihuZXdQb3N0U3VibWl0QnRuLCBzZXR0aW5ncyk7XG4gIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcbn1cbm5ld1Bvc3RFbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZU5ld1Bvc3RTdWJtaXQpO1xuXG5mdW5jdGlvbiBoYW5kbGVFZGl0UHJvZmlsZVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHByb2ZpbGVOYW1lRWwudGV4dENvbnRlbnQgPSBlZGl0UHJvZmlsZU5hbWVJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSBlZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWU7XG4gIGVkaXRQcm9maWxlTW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX2lzLW9wZW5lZFwiKTtcbn1cbmVkaXRQcm9maWxlRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUVkaXRQcm9maWxlU3VibWl0KTtcblxuaW5pdGlhbENhcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpdGVtKTtcbiAgY2FyZHNMaXN0LmFwcGVuZChjYXJkRWxlbWVudCk7XG59KTtcblxuZGlzYWJsZUJ1dHRvbihuZXdQb3N0U3VibWl0QnRuLCBzZXR0aW5ncyk7XG4iXSwibmFtZXMiOlsic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsIiwiaW5wdXRFbCIsImNvbmZpZyIsImVycm9yTXNnRWwiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWwiLCJzb21lIiwiaW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiZW5hYmxlQnV0dG9uIiwiYWRkIiwicmVzZXRWYWxpZGF0aW9uIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsImJ1dHRvbkVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1zZyIsInZhbGlkYXRpb25NZXNzYWdlIiwiZWRpdFByb2ZpbGVCdG4iLCJlZGl0UHJvZmlsZU1vZGFsIiwiZWRpdFByb2ZpbGVDbG9zZUJ0biIsInByb2ZpbGVOYW1lRWwiLCJwcm9maWxlRGVzY3JpcHRpb25FbCIsImVkaXRQcm9maWxlRm9ybSIsImVkaXRQcm9maWxlTmFtZUlucHV0IiwiZWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0Iiwib3Blbk1vZGFsIiwibW9kYWwiLCJjdXJyZW50TW9kYWwiLCJoYW5kbGVFc2NhcGVLZXkiLCJuZXdQb3N0TW9kYWwiLCJuZXdQb3N0U3VibWl0QnRuIiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJldmVudCIsInRhcmdldCIsImNvbnRhaW5zIiwidmFsdWUiLCJuZXdQb3N0QnRuIiwibmV3UG9zdENsb3NlQnRuIiwibmV3UG9zdEVsIiwibmV3UG9zdENhcHRpb25JbnB1dCIsIm5ld1Bvc3RMaW5rSW5wdXQiLCJjYXJkc0xpc3QiLCJjYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiZ2V0Q2FyZEVsZW1lbnQiLCJkYXRhIiwiY2FyZEVsZW1lbnQiLCJjbG9uZU5vZGUiLCJjYXJkVGl0bGVFbCIsImNhcmRJbWFnZUVsIiwic3JjIiwibGluayIsImFsdCIsIm5hbWUiLCJjYXJkTGlrZUJ0bkVsIiwidG9nZ2xlIiwicHJldmlld01vZGFsSW1hZ2VFbCIsInByZXZpZXdNb2RhbENhcHRpb25FbCIsInByZXZpZXdNb2RhbCIsInByZXZpZXdNb2RhbENsb3NlQnRuIiwibW9kYWxGb3JtIiwicHJldmVudERlZmF1bHQiLCJwcmVwZW5kIiwicmVzZXQiLCJpdGVtIiwiYXBwZW5kIl0sInNvdXJjZVJvb3QiOiIifQ==